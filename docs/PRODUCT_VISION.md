# 产品方向文档：从 DecoPilot 到用户智能体

> 不是"做一个装修智能体"，而是"做一个以用户为中心、能替代80%软件的智能伙伴"
>
> DecoPilot 是验证场景的 demo，不是终局。终局是一个懂你、陪你、替你管事的智能体。

---

## 一、一个根本性的问题：我们到底在做什么？

### 现状的局限

DecoPilot 目前的定位是"家居行业智能体"——一个垂类 AI 助手。它有阶段感知、专家角色、计算工具、知识图谱、记忆系统。架构精良，能力完备。

但它本质上还是一个**问答机器**。用户来问，它来答。对话结束，关系中断。

这和市面上所有垂类智能体的问题一样：它解决的是"某个领域的某个问题"，而不是"这个人的整个问题"。

### 重新定义问题

一个正在装修的用户，他的生活不只有装修。他在手机笔记本里记着"客厅要暖光"，在微信群里存着工长发的施工照片，在 Excel 里算着预算，在日历里标着工期节点，在小红书里收藏着灵感图。

他用 5 个 app 管理同一件事，自己当调度员，在这些信息孤岛之间搬运数据、做决策。

**这才是真正的痛苦——不是"不知道选什么瓷砖"，而是"我的整个装修过程是碎片化的、失控的"。**

### 我们的答案

我们要做的不是一个更聪明的问答机器，而是一个**用户智能体（User Agent）**——

它不服务于某个垂直领域，它服务于某个具体的人。
它不回答问题，它管理流程。
它不是工具，它是伙伴。

---

## 二、核心命题："未来80%的软件会被智能体替代"

### 为什么软件会被替代？

传统软件的本质是四个字：**数据的 CRUD**。

- 笔记本 = 文字的存取
- 看板 = 状态的流转
- 日历 = 时间的排列
- 表格 = 数字的计算
- 相册 = 图片的分类

它们各自是一个个孤岛。用户自己当"调度员"，在这些孤岛之间搬运信息、做判断、做决策。

智能体能替代它们，不是因为智能体的 UI 更好，而是因为：

1. **智能体能理解数据，软件只能存储数据。** 用户在笔记里写"客厅要那种咖啡店的感觉"，笔记本只是存了一行字，智能体理解了这是"日式原木风、暖光、色温3000K"。

2. **智能体能连接数据，软件只能隔离数据。** 用户的预算、风格偏好、工期、家庭成员情况，在传统模式下散落在不同 app 里。智能体把它们统一理解、交叉关联。

3. **智能体能主动行动，软件只能被动响应。** 日历不会提醒你"橱柜该订了，定制周期25天，再不订就赶不上施工"。智能体会。

### 不是替代 UI，是替代"用户当调度员"这件事

关键洞察：智能体不需要重新发明笔记本、看板、日历的 UI。它需要做的是——

**把这些软件的功能"溶解"成自己的内在能力，让用户不再需要在多个 app 之间切换。**

用户不再"打开笔记本记一条"，而是在对话中说一句话，智能体自动把它沉淀到正确的地方。
用户不再"打开看板看进度"，而是问一句"我装修到哪了"，智能体给出完整的状态报告。
用户不再"打开日历设提醒"，智能体在正确的时间主动提醒正确的事。

### 1+1 > 2 的耦合效应

这不是简单地把"聊天"和"笔记"拼在一起。耦合的价值在于：

**智能体使用笔记中的数据，能更好地理解用户；理解用户后，能更好地管理笔记中的数据。**

举例：
- 用户随手记了一句"邻居家用的东鹏瓷砖，说不错" → 智能体理解为"用户对东鹏品牌有正面印象，信息来源是邻居口碑" → 下次用户问瓷砖推荐时，智能体会说"您之前提到邻居用了东鹏觉得不错，东鹏确实在性价比上很有优势，您家卫生间可以考虑他们的防滑系列"
- 用户拍了一张施工照片发给智能体 → 智能体识别出是水电改造阶段 → 自动更新装修进度 → 主动提醒"水电改完记得拍照存档，后面装修完看不到管线走向了"

每一条数据都不是孤立的，它们在智能体的理解中形成网络，越用越懂你。

---

## 三、产品形态：用户的"第二大脑"

### 3.1 核心概念：User Context File（用户上下文档案）

这是整个产品的基石。每个用户都有一份持续演进的档案，它不是传统的"用户画像标签"，而是一个**活的、结构化的、AI 可读的个人知识库**。

```
用户档案（User Context File）
├── 身份信息（用户主动提供）
│   ├── 家庭结构：三口之家，孩子3岁
│   ├── 房屋信息：北京朝阳，120平三居，2025年交房
│   └── 预算范围：25-30万
│
├── 偏好模型（对话中提取 + 行为推断）
│   ├── 风格倾向：日式原木 0.8, 现代简约 0.3
│   ├── 决策模式：谨慎型，倾向多方比较后决定
│   ├── 信息来源偏好：重视邻居/朋友口碑，其次看测评
│   ├── 价格敏感度：中等，愿意为环保和品质加价
│   └── 沟通风格：喜欢简洁直接，不喜欢长篇大论
│
├── 项目状态（智能体自动维护）
│   ├── 当前阶段：施工期 - 水电改造中
│   ├── 已完成决策：风格=日式原木, 设计师=已定, 全屋定制=索菲亚
│   ├── 待决策项：地板品牌, 卫浴五金, 灯具方案
│   ├── 时间线：预计8月完工，当前进度35%
│   └── 预算消耗：已花12.8万，剩余17.2万
│
├── 知识沉淀（对话/笔记中积累）
│   ├── "邻居说东鹏瓷砖不错" (来源:对话, 时间:3月15日)
│   ├── "工长建议防水做三遍" (来源:对话, 时间:4月2日)
│   ├── "小红书看到的卫生间干湿分离方案" (来源:用户上传图片, 时间:3月20日)
│   └── "设计师说承重墙不能动" (来源:对话, 时间:3月8日)
│
└── 关系网络（智能体推断）
    ├── 妻子：倾向全屋定制，对甲醛敏感
    ├── 工长：张师傅，做事靠谱但沟通少
    └── 设计师：李设计，方案不错但报价偏高
```

这份档案有三个关键特性：

1. **三源汇聚**：用户主动填的 + 对话中提取的 + 系统推断的。用户不需要填表，正常聊天就行，智能体自动沉淀。

2. **显性可见**：用户随时可以看到智能体"记住了什么"，可以修正、删除、补充。这是建立信任的关键——不是黑箱地"我懂你了"，而是"我注意到这些，对吗？"

3. **持续演进**：不是一次性的问卷，而是随着每次对话、每条笔记、每个决策不断更新的活文档。

### 3.2 核心能力：溶解软件

智能体内置的能力模块，替代用户原本需要多个 app 完成的事：

#### 能力一：智能笔记（替代备忘录/笔记本）

用户不需要"打开笔记本"。在对话中说的任何值得记住的信息，智能体自动识别并沉淀。

```
用户："今天去建材市场看了，马可波罗的800×800瓷砖报价85一片，导购说买够50片可以打8折"

智能体的动作：
1. 沉淀到知识库：{品牌:马可波罗, 规格:800×800, 单价:85, 折扣:50片8折, 时间:今天, 来源:建材市场实地}
2. 关联到项目：更新"瓷砖选购"待决策项的候选方案
3. 自动计算：按120平客厅面积，约需55片，8折后总价3740元
4. 回复用户："记下了。按您家客厅面积算，大概需要55片，刚好够打8折，总价约3740元。
   要不要我和之前看的东鹏做个对比？"
```

用户也可以主动"记笔记"：
```
用户："帮我记一下：卫生间的花洒要选恒温的，预算500以内"

智能体："记下了。我把它加到了您的卫浴待选清单里。
目前您的卫浴清单：马桶（已定：TOTO CW886B）、花洒（待选：恒温，≤500元）、浴室柜（未开始）。"
```

关键区别：传统笔记本只是存了一行字。智能体理解了这行字的含义，把它放到了正确的上下文中，并且在未来的对话中会用到它。

#### 能力二：项目看板（替代 Trello/飞书看板）

用户不需要手动维护看板。智能体根据对话内容自动维护项目状态。

```
用户："水电改完了，工长说明天开始贴瓷砖"

智能体的动作：
1. 更新项目状态：水电改造 → 已完成 ✓，瓦工 → 进行中
2. 检查前置条件：防水是否已做？闭水试验是否通过？
3. 触发提醒：瓷砖是否已到货？美缝剂是否已买？
4. 更新时间线：进度从35%更新到42%

回复用户："好的，水电完工了！进度更新到42%。
贴砖之前确认两件事：
① 防水闭水试验做了吗？（这个必须在贴砖前确认）
② 瓷砖到货了吗？如果还没到，让工长先做其他区域，别空等。"
```

用户随时可以问进度：
```
用户："我装修到哪了？"

智能体："您的装修进度：42%
✅ 已完成：拆改、水电改造
🔄 进行中：瓦工（贴砖）
⏳ 待开始：木工、油漆、安装、软装
📅 预计完工：8月中旬（按当前进度，比计划快3天）
💰 已花费：12.8万 / 预算30万（42.7%，和进度基本匹配）

当前需要您关注的：
- 地板还没定，建议本周确定（木工阶段需要）
- 室内门的定制周期25天，下周前需要下单"
```

#### 能力三：智能提醒（替代日历/待办）

不是用户设闹钟，而是智能体基于对项目的理解，在正确的时间提醒正确的事。

```
场景一：基于工期的主动提醒
"您的瓦工阶段预计还有5天完成，木工紧接着进场。
提醒您：①确认吊顶方案（木工第一项）②确认衣柜内部格局图（全屋定制需要）"

场景二：基于市场的主动提醒
"您关注的东鹏瓷砖，618活动价比您上次看的便宜15%。要不要现在下单？"

场景三：基于遗忘的主动提醒
"您上次说要问设计师承重墙的问题，确认了吗？这个影响后面的拆改方案。"
```

#### 能力四：决策支持（替代搜索引擎/小红书/知乎）

不是给你一堆信息让你自己判断，而是基于你的具体情况给出具体建议。

```
用户："地板选实木还是复合？"

传统搜索引擎：返回10篇文章，各说各的
小红书：返回100条笔记，信息矛盾
知乎：返回20个回答，越看越纠结

智能体（基于 User Context File）：
"根据您的情况，建议选三层实木复合。原因：
① 您家有地暖 → 纯实木容易变形，排除
② 孩子3岁 → 需要耐磨耐刮，强化复合最耐磨但脚感差
③ 日式原木风 → 三层实木的木纹质感最接近纯实木
④ 预算 → 三层实木200-400元/㎡，客厅+卧室约60㎡，总价1.2-2.4万，在您预算范围内

推荐看看：大自然、圣象、德尔这三个品牌的三层实木系列。
要我做个详细对比吗？"
```

---

## 四、架构演进：从 DecoPilot 到 User Agent

### 4.1 DecoPilot 现有架构的价值与局限

DecoPilot 已经建立了很好的基础：

**可复用的资产：**
- 记忆系统（memory.py）：5层记忆架构，UserProfile 数据结构，已经有了 User Context File 的雏形
- 阶段感知（stage_reasoning.py）：项目看板的推理基础
- 工具系统（tools.py）：9个计算工具，决策支持的计算引擎
- 推理引擎（reasoning.py）：6种推理类型，复杂决策的思考框架
- 知识图谱（knowledge_graph.py）：领域知识的结构化存储

**需要突破的局限：**
- 记忆系统只记录，不主动使用——记了用户画像但没有真正个性化回答
- 阶段感知是被动的——检测用户在哪个阶段，但不主动推进流程
- 工具是孤立的——计算了结果但没有融入对话
- 整体是"问答模式"——用户不来，系统就静止

### 4.2 新架构：以 User Context File 为核心

```
                    ┌─────────────────────────┐
                    │    User Context File     │
                    │  （用户的第二大脑）        │
                    │                         │
                    │  身份 / 偏好 / 状态       │
                    │  知识 / 关系 / 历史       │
                    └────────┬────────────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
              ▼              ▼              ▼
     ┌────────────┐  ┌────────────┐  ┌────────────┐
     │  对话引擎   │  │  笔记引擎   │  │  看板引擎   │
     │            │  │            │  │            │
     │ 理解意图    │  │ 信息沉淀    │  │ 状态追踪    │
     │ 个性化回答  │  │ 知识关联    │  │ 进度计算    │
     │ 决策支持    │  │ 自动分类    │  │ 主动提醒    │
     └────────────┘  └────────────┘  └────────────┘
              │              │              │
              └──────────────┼──────────────┘
                             │
                    ┌────────▼────────┐
                    │   领域知识层     │
                    │                 │
                    │ 装修知识图谱     │
                    │ 决策树引擎      │
                    │ 计算工具集      │
                    │ 避坑规则库      │
                    └─────────────────┘
```

关键变化：

1. **User Context File 成为中心**，不是对话成为中心。所有引擎都读写同一份用户档案。

2. **对话只是交互方式之一**，不是唯一方式。用户可以通过对话、笔记、上传图片、甚至沉默（智能体主动触达）来与系统交互。

3. **领域知识层是可插拔的**。装修只是第一个场景。同样的架构可以支撑其他长周期、多决策的场景（买房、育儿、健康管理、创业...）。

### 4.3 从 DecoPilot 到 User Agent 的演进路径

不是推翻重来，而是渐进演化：

```
阶段一：让 DecoPilot 的记忆真正工作（现有代码改造）
  │
  │  UserProfile → User Context File（扩展数据结构）
  │  被动记忆 → 主动使用（画像注入 prompt）
  │  问答模式 → 对话+沉淀模式（每轮对话自动提取信息）
  │
  ▼
阶段二：加入笔记和看板能力（新增模块）
  │
  │  笔记引擎：对话中的信息自动沉淀 + 用户主动记录
  │  看板引擎：项目状态自动维护 + 进度可视化
  │  提醒引擎：基于项目理解的主动提醒
  │
  ▼
阶段三：打通数据，实现 1+1>2（系统集成）
  │
  │  笔记数据 → 丰富 User Context File → 提升对话质量
  │  对话决策 → 更新看板状态 → 触发下一步提醒
  │  看板进度 → 影响对话策略 → 主动引导下一个决策
  │
  ▼
阶段四：场景泛化（架构复用）
  │
  │  装修场景验证完毕 → 抽象出通用 User Agent 框架
  │  插入新的领域知识层 → 支撑新场景
  │  同一个用户的多个项目共享 User Context File
  │
  ▼
终局：一个懂你的智能伙伴，不限于任何单一场景
```

---

## 五、信任设计：智能体的"灵魂问题"

### 5.1 从"工具"到"伙伴"的心理跨越

用户愿意让笔记本存他的想法，是因为笔记本"不会思考"。它是一个安全的、被动的容器。

当智能体开始"理解"用户数据的时候，用户的心理模型会发生根本性的变化——从"我在用一个工具"变成"有一个东西在看我写的东西"。

这是产品成败的关键。如果用户不信任智能体，所有能力都是零。

### 5.2 信任的三个设计原则

#### 原则一：理解是显性的

智能体从对话/笔记中提取了什么、理解了什么，用户必须能看到、能修正。

```
不好的设计：
用户说了一句话 → 智能体默默更新了画像 → 下次对话突然表现出"我知道你"

好的设计：
用户说了一句话 → 智能体说"我注意到您提到了XXX，我把它记在了您的装修档案里，
您可以随时在'我的档案'中查看和修改。"
```

User Context File 必须有一个用户可访问的界面，让用户看到智能体"记住了什么"。这不是功能，这是信任的基础设施。

#### 原则二：主动性有节奏

不是用户写了一条笔记就立刻跳出来分析。智能体的主动性要像一个好的合作伙伴——平时不多嘴，关键时刻能说到点上。

```
不好的设计：
用户随便记了一句"今天心情不好" → 智能体立刻说"我注意到您情绪低落，是不是装修压力太大了？"

好的设计：
用户问"地板选什么好" → 智能体在回答中自然地带出之前积累的上下文：
"根据您之前提到的地暖需求和日式风格偏好，建议看看三层实木复合..."
```

主动提醒的触发条件应该是**项目节点**，而不是**用户行为**。"橱柜该订了"是项目节点提醒，"你好久没来了"是骚扰。

#### 原则三：用户始终掌控

智能体是建议者，不是决策者。它可以说"我建议..."，但永远不能替用户做决定。

```
不好的设计：
"我已经帮您把地板订单提交了。"

好的设计：
"根据对比分析，大自然的三层实木复合最适合您的情况。
要我帮您整理一份选购清单，周末去店里可以直接对照看？"
```

用户可以随时：
- 查看智能体记住了什么 → 修改或删除
- 关闭主动提醒 → 智能体变回被动模式
- 导出所有数据 → 数据属于用户，不属于平台
- 重置关系 → "忘掉我"，从零开始

---

## 六、与 DecoPilot 现有能力的映射

### 现有能力如何融入新架构

| 现有模块 | 新架构中的角色 | 需要的改造 |
|---------|-------------|-----------|
| memory.py (UserProfile) | User Context File 的数据层 | 扩展数据结构，增加笔记、看板、关系网络字段 |
| memory.py (MemoryItem) | 知识沉淀的存储单元 | 增加来源标记（对话/笔记/上传/推断） |
| stage_reasoning.py | 看板引擎的推理层 | 从"检测阶段"升级为"推进流程" |
| tools.py (9个工具) | 决策支持的计算引擎 | 工具结果自动写入 User Context File |
| reasoning.py | 对话引擎的思考框架 | 推理链真正注入 prompt（Phase 1 已规划） |
| knowledge_graph.py | 领域知识层 | 不变，作为可插拔的知识模块 |
| enhanced_agent.py | 对话引擎的核心 | 增加"信息提取→沉淀"的后处理流程 |
| output_formatter.py | 多模态输出层 | 增加看板卡片、笔记卡片、提醒卡片的输出格式 |
| decision_tree.py (规划中) | 决策支持的引导框架 | 按原计划实现 |
| proactive_reminders.py (规划中) | 提醒引擎 | 按原计划实现，但触发源从"阶段"扩展为"User Context File 变化" |

### 不需要推翻的部分

DecoPilot 的 DEEP_RESEARCH_UPGRADE_PLAN 中的 Phase 1-4 依然有效，它们是"让现有能力真正工作"的必要步骤。新的产品方向不是替代那个计划，而是在它之上叠加一层更高的愿景。

具体来说：
- Phase 1（知识库填充、推理链注入、画像个性化、工具融入）→ 直接复用，这是基础
- Phase 2（决策树、主动提醒、避坑预警）→ 直接复用，融入看板引擎和提醒引擎
- Phase 3（深度研究报告）→ 复用，作为决策支持的"重火力"模式
- Phase 4（B端价值闭环）→ 复用，但 User Context File 的聚合数据比单纯的 UserProfile 更有价值

---

## 七、竞争定位：我们和谁不一样？

### 与通用 AI 助手的区别（ChatGPT / DeepSeek / Kimi）

它们是"什么都能聊，但不记得你是谁"。
我们是"专注陪你走完一个项目，越用越懂你"。

通用 AI 的每次对话都是从零开始。它不知道你家120平、有地暖、孩子3岁、预算30万、上周刚看了东鹏瓷砖。我们知道。

### 与垂类智能体的区别（装修AI、设计AI）

它们是"回答装修问题的机器"。
我们是"帮你管理整个装修过程的伙伴"。

垂类智能体解决的是"某个问题"，我们解决的是"这个人的整个流程"。用户不需要在智能体和笔记本和看板和日历之间切换，一个入口搞定所有事。

### 与项目管理工具的区别（飞书/Notion/Trello）

它们是"你来维护状态，工具帮你展示"。
我们是"你正常聊天，智能体帮你维护状态"。

项目管理工具需要用户有"管理意识"——主动创建任务、更新状态、设置提醒。大多数装修业主没有这个习惯，也不应该要求他们有。智能体应该把管理的负担从用户身上拿走。

### 与 OpenClaw 等 AI 伙伴的共鸣

OpenClaw 的理念是"AI 作为伙伴而非工具"。我们的方向与此一致，但更进一步——

OpenClaw 侧重情感陪伴和通用对话。
我们侧重**在具体项目中的实际价值交付**。

我们的伙伴关系不是建立在"聊得来"上，而是建立在"它真的帮我省了钱、避了坑、管好了我的装修"上。信任来自实际价值，不是情感模拟。

---

## 八、场景泛化的可能性

装修只是第一个验证场景。User Agent 的架构天然适用于所有"长周期、多决策、信息碎片化"的场景：

| 场景 | 周期 | 决策复杂度 | 信息碎片化程度 | 适配度 |
|------|------|-----------|-------------|-------|
| 装修 | 3-12个月 | 极高（100+决策点） | 极高 | ★★★★★ |
| 买房 | 1-6个月 | 高（区域/户型/贷款/学区） | 高 | ★★★★☆ |
| 婚礼筹备 | 3-12个月 | 高（场地/婚庆/婚纱/宾客） | 高 | ★★★★☆ |
| 育儿（0-3岁） | 持续 | 中高（喂养/早教/医疗/用品） | 高 | ★★★★☆ |
| 创业早期 | 持续 | 极高 | 极高 | ★★★★★ |
| 健康管理 | 持续 | 中（饮食/运动/体检/用药） | 中高 | ★★★☆☆ |
| 留学申请 | 6-18个月 | 高（选校/文书/签证/住宿） | 高 | ★★★★☆ |

共同特征：用户面对一个复杂的、不熟悉的、高风险的流程，需要一个懂行的伙伴帮他理清思路、管理进度、做出决策。

这些场景中，用户目前的解决方案都是"自己当调度员 + N个app"。智能体可以把这个调度员的角色接过来。

---

## 九、这份文档的定位

这不是一份执行计划，而是一份方向文档。它回答的是"我们要去哪"，而不是"下周写什么代码"。

执行层面，DEEP_RESEARCH_UPGRADE_PLAN 中的 Phase 1-4 依然是最务实的下一步。但在执行的过程中，每一个设计决策都应该用这份文档的愿景来校准：

- 这个功能是在帮用户"回答一个问题"，还是在帮用户"管理一个流程"？
- 这个数据是"记了就完了"，还是"记了之后会被理解和使用"？
- 这个交互是"用户来找我"，还是"我在正确的时间找到用户"？
- 这个能力是"只在装修场景有用"，还是"换个领域知识层就能复用"？

如果答案都是后者，我们就在正确的方向上。

---

> 我们不是在做一个更好的装修 AI。
> 我们是在做一个新物种——一个以用户为中心、能替代一堆软件、越用越懂你的智能伙伴。
> 装修只是它学会的第一个技能。
